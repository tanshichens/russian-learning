# 用户登录系统使用指南

## 功能概述

本系统实现了完整的用户登录认证和设备限制功能。

### 核心功能

1. ✅ **账号密码登录**：用户需要输入正确的账号和密码才能访问受保护的页面
2. ✅ **设备限制**：每个账号最多只能在2个设备上同时登录
3. ✅ **路由保护**：未登录用户只能访问首页，其他页面需要登录
4. ✅ **设备识别**：自动识别设备类型（电脑/平板/手机）
5. ✅ **持久化登录**：登录状态保存在本地，刷新页面不会丢失

## 预设账号

系统预设了以下测试账号：

| 账号 | 密码 | 说明 |
|------|------|------|
| student1 | password123 | 学生账号1 |
| student2 | password456 | 学生账号2 |
| teacher | teacher789 | 教师账号 |
| admin | admin000 | 管理员账号 |

## 页面权限

### 公开页面
- ✅ **首页**：所有人都可以访问

### 受保护页面（需要登录）
- 🔒 **单词库**：需要登录
- 🔒 **A1-C2高频词下载**：需要登录
- 🔒 **听力练习**：需要登录

## 使用流程

### 1. 登录
1. 点击导航栏右侧的"用户"按钮（桌面端）或汉堡菜单中的"登录"（移动端）
2. 输入账号和密码
3. 点击"登录"按钮

### 2. 设备限制
- 如果账号已在2个设备上登录，第3个设备尝试登录时会收到提示
- 需要先在其他设备上退出登录，才能在新设备上登录

### 3. 退出登录
- **桌面端**：点击用户按钮，在下拉菜单中点击"退出登录"
- **移动端**：打开汉堡菜单，点击"退出登录"

## 技术实现

### 认证流程
1. 用户输入账号密码
2. 系统验证账号密码是否正确
3. 检查设备数量限制
4. 生成设备唯一ID
5. 保存登录状态到localStorage
6. 记录设备信息

### 设备识别
- **手机端**：宽度 ≤ 768px
- **平板端**：宽度 769px - 1024px
- **电脑端**：宽度 > 1024px

### 数据存储
使用localStorage存储以下信息：
- `authToken`: 认证令牌
- `username`: 用户名
- `deviceInfo`: 当前设备信息
- `deviceId`: 设备唯一ID
- `devices_<username>`: 用户的所有登录设备列表

## 安全提示

⚠️ **注意**：当前实现使用localStorage存储，仅适用于演示和学习用途。

生产环境建议：
1. 使用后端API进行账号密码验证
2. 使用JWT或Session进行身份认证
3. 在服务器端管理设备列表
4. 添加密码加密
5. 实现token过期机制
6. 添加HTTPS加密传输

## 修改账号密码

在 `src/contexts/AuthContext.tsx` 文件中修改 `VALID_ACCOUNTS` 对象：

```typescript
const VALID_ACCOUNTS = {
  'your-username': 'your-password',
  'another-user': 'another-password',
  // 添加更多账号...
};
```

## 常见问题

### Q: 忘记密码怎么办？
A: 当前版本没有找回密码功能，请联系管理员重置。

### Q: 如何清除所有设备的登录状态？
A: 清除浏览器的localStorage即可：
- 打开开发者工具（F12）
- 进入"Application"或"应用程序"标签
- 选择"Local Storage"
- 清除相关数据

### Q: 设备限制如何生效？
A: 系统会为每个设备生成唯一ID，当用户登录时记录设备信息。如果已有2个不同设备登录，第3个设备无法登录。

### Q: 可以修改设备数量限制吗？
A: 可以。在 `src/contexts/AuthContext.tsx` 中修改设备限制数量（目前是2）。

